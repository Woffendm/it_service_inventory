<h2> <%= t(:employee_roster_for_group) + @group.name %> </h2>


<% if (@group.get_available_employees.length > 0)  && (can? :update, @group) %>
  <h3> <%= t(:add) + t(:employee) %> </h3>
  <div id="my-form">
    <%= form_tag("add_employee", :method => "post") do %>
      <p>
        <%= label_tag :employee_id, t(:name) %>
        <%= collection_select(:employee, :id, @group.get_available_employees, :id, :full_name) %>
        <%= submit_tag  t(:add) %>
      </p>
    <% end %>
  </div>
<% end %>


<% if @paginated_employees.any? %>
  <table class="list issues"><caption> <%= t(:existing_employees) %> </caption>
    <thead>
      <th> </th>
      <th> </th>
    </thead>
    <tbody>
      <% @paginated_employees.each do |employee| %>
        <% if @odd %>
          <% @odd = false %>
          <tr class="even">
        <% else %>
          <% @odd = true %>
          <tr class="odd">
        <% end %>
          <td>
            <%= render  :partial => "/shared/can_update_employee.html.erb", 
                        :locals => {:@employee => employee} %>
          </td>
          <td>
            <% if @group.employee_groups.find_by_employee_id(employee.id).group_admin %>
              <%= t(:group_admin) %>
            <% else %>
              <% if can? :update, @group %>
                <%= form_tag("add_group_admin", :method => "post") do %>
                   <%= hidden_field_tag(:employee, employee.id) %>
                   <%= submit_tag  t(:make) + t(:group_admin), :confirm => t(:confirm_admin) %>
                 <% end %>
              <% end %>
            <% end %>
          </td>
          <% if can? :update, @group %>
            <td>
              <%= form_tag("remove_employee", :method => "post") do %>
                <%= hidden_field_tag(:employee, employee.id) %>
                <%= submit_tag  t(:remove), :confirm => t(:confirm_removal) + t(:employee) %>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @paginated_employees %>
  <%= render :partial => "/shared/results_per_page.html.erb" %>
<% end %>


<br/><br/><br/>
<%= link_to t(:return_to) + t(:all_groups), groups_path %>