<h2> 
  <%= t(:products) %> 
  <% if can? :create, Product %>
    <%= link_to "#{content_tag :em, '', :class => 'icon-plus'}
                 #{t(:new_product)}".html_safe, "#", :class => "modal_trigger" %>
  <% end %>
</h2>


<%= render  :partial => "/products/new_product", 
            :locals => {:@product => @product, :@groups => @groups} %>


<ul class="nav nav-tabs">
  <li class="active">
    <a href="#user_group_products" data-toggle="tab"> Products for my Group </a>
  </li>
  <li>
    <a href="#all_products" data-toggle="tab"> All Products </a>
  </li>
</ul>



<div class="tab-content">
  <div class="tab-pane active" id="user_group_products">
    <table class="table table-striped">
      <caption> Products for my Groups </caption>
      <thead>
        <th> <%= t(:name) %> </th>
        <th> <%= t(:description) %> </th>
        <th>  </th>
      </thead>
      <tbody>
        <% @user_group_products.each do |product| %>
          <tr class="<%= cycle('odd', 'even') %>">
            <td>
              <% if product.url && !product.url.blank? %>
                <%= link_to "#{content_tag :em, '', :class => 'icon-globe'}".html_safe, product.url,
                            :target => '_blank' %>
              <% else %>
                <span class="blank-icon"></span>
              <% end %>
              <%= link_to  product.name, edit_product_path(product.id) %>
            </td>
            <td>
              <% unless product.description.blank? %>
                <div class="tooltip_trigger">
                  <%= product.description.truncate(20) %>
                </div>
                <div class="tooltip">
                  <p class="tooltip_paragraph"> <%= product.description %> </p>
                </div>
              <% end %>
            </td>
            <td>
              <% if can? :delete, Product %>
                <%= link_to t(:delete), product_path(product.id), :method => :delete, :confirm =>
                            t(:confirm_deletion) %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    
    
    <div class="pagination_footer">
      <%= will_paginate @user_group_products, :param_name => :user_group_products_page %>
      <%= render :partial => "/shared/results_per_page", 
                  :locals => {:@current_tab => "#user_group_products"} %>
    </div>
  </div>




  <div class="tab-pane" id="all_products">
    <table class="table table-striped">
      <caption> <%= t(:all_products) %> </caption>
      <thead>
        <th> <%= t(:name) %> </th>
        <th> <%= t(:description) %> </th>
        <th>  </th>
      </thead>
      <tbody>
        <% @products.each do |product| %>
          <tr class="<%= cycle('odd', 'even') %>">
            <td> 
              <% if product.url && !product.url.blank? %>
                <%= link_to "#{content_tag :em, '', :class => 'icon-globe'}".html_safe, product.url,
                            :target => '_blank' %>
              <% else %>
                <span class="blank-icon"></span>
              <% end %>
              <%= link_to  product.name, edit_product_path(product.id) %> 
            </td>
            <td>  
              <% unless product.description.blank? %> 
                <div class="tooltip_trigger">
                  <%= product.description.truncate(20) %> 
                </div>
                <div class="tooltip">
                  <p class="tooltip_paragraph"> <%= product.description %> </p>
                </div>
              <% end %>
            </td>
            <td> 
              <% if can? :delete, Product %>
                <%= link_to t(:delete), product_path(product.id), :method => :delete, :confirm =>
                            t(:confirm_deletion) %> 
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    
    
    <div class="pagination_footer">
      <%= will_paginate @products, :param_name => :products_page %>
      <%= render :partial => "/shared/results_per_page", 
                  :locals => {:@current_tab => "#all_products"} %>
    </div>
  </div>
</div>


