<h1> Edit Employee <%= @employee.name %> </h1>

<%= error_messages_for :employee %>
<table class="table table-striped"><caption> Edit Employee Attributes </caption>
	<thead>
		<th> Name </th>
		<th> Email </th>
		<th> Notes </th>
		<th> </th>
	</thead>
	<tbody>
		<tr>
			<%= form_for @employee do |form| %>
				<td> <%= form.text_field :name %> </td>
				<td> <%= form.text_field :email %> </td>	
				<td> <%= form.text_field :notes %> </td>
				<td> <%= form.submit  "Save changes" %> </td>
			<% end %>
		</tr>
	</tbody>
</table>


<!-- Drop-down list of services that can be added. Only populated with services that the employee doesn't already have. -->
<table class="table table-striped"><caption> Add Service </caption>
	<thead>
		<th>Service</th>
		<th>Allocation</th>
		<th> Submit </th>
	</thead>
	<tbody>
		<tr>
			<%= form_tag("add_service", :method => "post") do %>
				<%= error_messages_for :employee_allocation %>
				<td> <%= collection_select(:employee_allocation, :service_id,
				 														@employee.get_available_services, :id, :name) %> </td>
				<td> <%= select(:employee_allocation, :allocation, [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8,
					 							0.9, 1]) %> </td>
				<td> <%= submit_tag  "Add" %> </td>
			<% end %>
		<tr>
	</tbody>
</table>



<!-- Creates table with the employee's services and allocations -->
<table class="table table-striped"><caption> Existing Services</caption>
	<thead>
		<th>Services</th>
		<th>Allocations</th>
		<th> Remove Service </th>
	</thead>
	<tbody>
		<% @employee.employee_allocations.each do |employee_allocation| %>
			<% if employee_allocation != @employee_allocation %>
			<tr>
				<td> <%= employee_allocation.service.name %> </td>
		  	<td> <%= employee_allocation.allocation %> </td>
				<td> 
					<%= form_tag("remove_service", :method => "post") do %>
						<%= hidden_field_tag(:employee_allocation, employee_allocation.id) %>
						<%= submit_tag  "Remove", :confirm => "Confirm removal." %>
					<% end %>
				</td>
			</tr>
			<% end %>
		<% end %>
	</tbody>
</table>


<%= link_to "Back", employees_path %>