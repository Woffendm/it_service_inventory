<head>
	<%= javascript_include_tag :defaults %>
	<script src="../home.js"></script>
</head>


<h1> Home </h1>

<table class="table table-striped"><caption> Search</caption>
	<thead>
		<th>Group</th>
		<th>Employee</th>
	</thead>
	<tbody>
		<tr>
			<td>
				<div id="group_dropdown">
					<%= form_tag("employees", :method => "get") do %>
						<%= collection_select(:group, :id, @groups, :id, :name, 
																	{:prompt => 'All Groups' }) %>
					<% end %>
				</div>
			</td>
			<td>
				<div id="employee_dropdown">
					<%= form_tag("populate_employee_results", :method => "get") do %>
						<div id="employee_select_div">
							<%= collection_select(:employee, :id, @employees, :id, :name, 
																		{:prompt => 'Select Employee' }) %>
						</div>
					<% end %>
				</div>
			</td>
		</tr>
	</tbody>
</table>




<div id = "employee_results">
	<% if @employee != nil %>
	<table class="table table-striped"><caption> Results</caption>
		<thead>
			<th>Name</th>
			<th>Services</th>
			<th>Allocations</th>
		</thead>
		<tbody>
			<tr>
				<td> <%= @employee.name %> </td>
				<% @allign = true %>
				<% @employee.employee_allocations.each do |employee_allocation| %>
					<% if(@allign) %>
						<td> <%= employee_allocation.service.name %> </td>
				  	<td> <%= employee_allocation.allocation %> </td>
						</tr>
						<% @allign = false %>
					<% else %>
						<tr>
							<td>  </td>
							<td> <%= employee_allocation.service.name %> </td>
			  			<td> <%= employee_allocation.allocation %> </td>
						</tr>
					<% end %>
				<% end %>
			</tr>
		</tbody>
	</table>
	<% end %>
</div>